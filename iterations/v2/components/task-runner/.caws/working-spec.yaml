id: ARBITER-014
title: "Task Runner - Worker Agent Execution and Constitutional Pleading"
risk_tier: 2
mode: feature
change_budget:
  max_files: 20
  max_loc: 800
blast_radius:
  modules: ["src/agents/", "src/workers/", "src/execution/"]
  data_migration: false
operational_rollback_slo: "30s"
scope:
  in: ["src/workers/", "src/agents/", "src/execution/", "tests/workers/", "tests/agents/", "tests/execution/"]
  out: ["node_modules/", "dist/", "src/arbiter/", "src/orchestrator/"]
invariants:
  - "All worker submissions include self-critique artifacts before constitutional judgment"
  - "Workers cannot bypass CAWS validation through any execution path"
  - "Multi-turn feedback loops maintain context integrity across iterations"
  - "Worker performance data is automatically collected for RL training pipelines"
acceptance:
  - id: "A1"
    given: "Worker receives task assignment from arbiter"
    when: "Worker executes task and prepares submission"
    then: "Worker generates self-critique artifact outlining potential violations and improvement opportunities"
  - id: "A2"
    given: "Worker submission includes self-critique"
    when: "Arbiter requests constitutional deliberation"
    then: "Worker provides structured pleading with evidence bundle and waiver justifications if needed"
  - id: "A3"
    given: "Worker receives structured feedback on submission"
    when: "Feedback indicates quality gaps"
    then: "Worker generates improved iteration maintaining context and addressing all feedback points"
  - id: "A4"
    given: "Worker completes task successfully"
    when: "Final submission passes CAWS validation"
    then: "Worker automatically contributes performance telemetry to RL training pipeline"
  - id: "A5"
    given: "Worker encounters execution failure"
    when: "Failure prevents task completion"
    then: "Worker provides diagnostic information and rollback assistance for graceful degradation"
non_functional:
  a11y: []
  perf:
    task_execution_p95_ms: 30000
    feedback_processing_p95_ms: 2000
    self_critique_generation_p95_ms: 5000
    context_preservation_memory_mb: 100
  security: ["input-validation", "execution-sandboxing", "audit-logging"]
  reliability: { uptime_pct: 99.5, error_recovery_s: 5 }
  scalability: { concurrent_workers: 50, memory_per_worker_mb: 512 }
contracts:
  - type: "openapi"
    path: "docs/api/worker-execution.yaml"
    endpoints: ["POST /workers/{id}/execute", "POST /workers/{id}/plead", "GET /workers/{id}/status"]
observability:
  metrics:
    - worker_execution_duration
    - self_critique_quality_score
    - feedback_acceptance_rate
    - constitutional_compliance_rate
    - iteration_success_rate
  logs:
    - execution_trace
    - pleading_audit
    - feedback_processing
    - context_preservation
  alerts:
    - execution_timeout
    - constitutional_violation
    - feedback_loop_stall
migrations: []
rollback:
  strategy: "immediate"
  data_impact: "none"
  user_impact: "task interruption"
  monitoring: "execution status monitoring"
ai_assessment:
  complexity: medium
  novelty: low
  coordination: high
  testing: extensive
