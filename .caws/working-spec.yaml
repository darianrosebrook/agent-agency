id: IMPL-002
title: "Implement worker system TODO items and autonomous execution"
risk_tier: 2
mode: feature
change_budget:
  max_files: 40
  max_loc: 2500
blast_radius:
  modules: ["workers", "autonomous-executor", "caws-checker", "multimodal-scheduler"]
  data_migration: false
operational_rollback_slo: "20m"
scope:
  in: ["iterations/v3/workers/"]
  out: ["node_modules/", "target/", "dist/"]
invariants:
  - "Self-prompting agent initializes with proper dependencies"
  - "Worker output collection system establishes communication channels"
  - "Verdict execution system parses and validates specifications"
  - "Determinism validation analyzes code changes for deterministic behavior"
  - "Code complexity analysis evaluates cyclomatic complexity metrics"
  - "Surgical change analysis evaluates diff size and impact radius"
  - "CAWS waiver system includes governance and approval workflows"
  - "CAWS validation testing includes real spec parsing"
  - "Worker registry implements discovery and capability matching"
  - "Worker execution includes circuit breaker and retry logic"
  - "CAWS spec conversion maps all fields between formats"
  - "Worker execution uses real HTTP APIs instead of simulation"
  - "Service registry integration supports multiple discovery mechanisms"
  - "Video processing pipeline includes codec support"
  - "Cross-modal validation checks consistency between modalities"
acceptance:
  - id: "A1"
    given: "Metal GPU computation request"
    when: "Execute with compiled Metal shaders"
    then: "Pipeline state created and computation succeeds"
  - id: "A2"
    given: "MPS computation result"
    when: "Process MPSMatrix and MPSImage data"
    then: "Data structures parsed correctly"
  - id: "A3"
    given: "Active GPU computations"
    when: "Track memory allocations"
    then: "Registry maintains command buffers and allocations"
  - id: "A4"
    given: "System profiler output"
    when: "Parse temperature sensors"
    then: "GPU temperature data extracted accurately"
  - id: "A5"
    given: "GPU utilization metrics"
    when: "Monitor with thresholds"
    then: "Alerts triggered on high utilization"
  - id: "A6"
    given: "GPU memory fragmentation"
    when: "Analyze allocation patterns"
    then: "Defragmentation strategy implemented"
  - id: "A7"
    given: "Embedding computation request"
    when: "Use trained embedding models"
    then: "Word2Vec/GloVe embeddings loaded and applied"
  - id: "A8"
    given: "ONNX model format"
    when: "Apply quantization"
    then: "Model quantized using onnxruntime"
  - id: "A9"
    given: "Database connection UI"
    when: "User clicks create connection"
    then: "Connection creation dialog appears"
  - id: "A10"
    given: "Analytics dashboard"
    when: "User requests data refresh"
    then: "Cache invalidated and data refreshed"
  - id: "A11"
    given: "Time series data available"
    when: "Run anomaly detection"
    then: "Advanced analysis uses time series data"
contracts:
  - type: "rust_trait"
    path: "iterations/v3/apple-silicon/src/metal_gpu.rs"
    description: "Metal GPU computation interface with pipeline state management"
non_functional:
  perf: { api_p95_ms: 500, lcp_ms: 2000 }
  security: ["input-validation", "rate-limiting"]
  a11y: ["keyboard-navigation", "screen-reader-labels"]