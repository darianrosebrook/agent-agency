# Agent Agency V3 Production Environment Configuration
# Copy this file to .env.production and update with your actual values

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# PostgreSQL connection string
DATABASE_URL=postgresql://agent_agency:your-secure-password-here@postgres:5432/agent_agency

# Database connection pool settings
DATABASE_MAX_CONNECTIONS=20
DATABASE_MIN_CONNECTIONS=5
DATABASE_CONNECT_TIMEOUT=10
DATABASE_IDLE_TIMEOUT=300

# =============================================================================
# CACHE CONFIGURATION
# =============================================================================

# Redis connection string
REDIS_URL=redis://:your-secure-redis-password@redis:6379

# Redis connection pool settings
REDIS_MAX_CONNECTIONS=10
REDIS_MIN_IDLE_CONNECTIONS=2

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# JWT secret for API authentication (generate a strong random string)
JWT_SECRET=your-super-secure-jwt-secret-at-least-64-characters-long-change-this-immediately

# API key for service-to-service authentication
API_KEY=your-api-key-for-service-authentication

# Session encryption key
SESSION_SECRET=your-session-encryption-key-here

# OAuth configuration (if using external auth)
GITHUB_CLIENT_ID=your-github-oauth-client-id
GITHUB_CLIENT_SECRET=your-github-oauth-client-secret
GOOGLE_CLIENT_ID=your-google-oauth-client-id
GOOGLE_CLIENT_SECRET=your-google-oauth-client-secret

# =============================================================================
# EXTERNAL API CONFIGURATION
# =============================================================================

# OpenAI API (required for GPT models)
OPENAI_API_KEY=sk-your-openai-api-key-here

# Anthropic API (required for Claude models)
ANTHROPIC_API_KEY=sk-ant-your-anthropic-api-key-here

# Other AI providers (optional)
COHERE_API_KEY=your-cohere-api-key
REPLICATE_API_TOKEN=your-replicate-token

# =============================================================================
# ARBITER CONFIGURATION
# =============================================================================

# Constitutional AI arbiter settings
ARBITER_COUNCIL_SIZE=5
ARBITER_DEBATE_ROUNDS=3
ARBITER_CONFIDENCE_THRESHOLD=0.85
ARBITER_EVIDENCE_REQUIRED=true

# Arbiter model selection
ARBITER_MODEL=gpt-4-turbo-preview
ARBITER_FALLBACK_MODEL=claude-3-opus

# =============================================================================
# EXECUTION CONFIGURATION
# =============================================================================

# Task execution limits
MAX_CONCURRENT_TASKS=20
TASK_TIMEOUT_SECONDS=1800
MAX_TASK_RETRIES=3

# Worker pool configuration
WORKER_POOL_SIZE=10
WORKER_MAX_MEMORY_MB=4096
WORKER_TASK_TIMEOUT=900

# File operations settings
MAX_FILE_SIZE_MB=50
ALLOWED_FILE_TYPES=rs,ts,js,json,toml,yaml,md,txt
WORKSPACE_ROOT=/app/workspace

# =============================================================================
# SELF-PROMPTING CONFIGURATION
# =============================================================================

# Self-prompting loop settings
MAX_ITERATIONS=10
EVALUATION_THRESHOLD=0.8
SATISFICING_ENABLED=true
ROLLBACK_ENABLED=true

# Quality gates
QUALITY_GATES_ENABLED=true
TESTING_REQUIRED=true
LINTING_REQUIRED=true
TYPE_CHECKING_REQUIRED=true

# =============================================================================
# MONITORING & LOGGING
# =============================================================================

# Logging configuration
RUST_LOG=info,agent_agency=debug,tower_http=debug
LOG_LEVEL=INFO
LOG_FORMAT=json

# Metrics collection
METRICS_ENABLED=true
METRICS_PORT=9090

# Health check settings
HEALTH_CHECK_INTERVAL=30
HEALTH_CHECK_TIMEOUT=10

# =============================================================================
# NETWORKING & SECURITY
# =============================================================================

# Server configuration
HOST=0.0.0.0
PORT=3000
WORKER_PORT=9090

# CORS settings
CORS_ALLOWED_ORIGINS=https://your-domain.com,https://dashboard.your-domain.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key

# Rate limiting
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_BURST_SIZE=20

# SSL/TLS configuration
SSL_CERT_PATH=/etc/ssl/certs/agent-agency.crt
SSL_KEY_PATH=/etc/ssl/private/agent-agency.key
SSL_MIN_VERSION=TLSv1.2

# =============================================================================
# DASHBOARD CONFIGURATION
# =============================================================================

# Next.js dashboard settings
NEXT_PUBLIC_API_URL=https://api.your-domain.com
NEXTAUTH_SECRET=your-nextauth-secret-here
NEXTAUTH_URL=https://dashboard.your-domain.com

# Dashboard features
DASHBOARD_REALTIME_UPDATES=true
DASHBOARD_ANALYTICS_ENABLED=true
DASHBOARD_EXPORT_ENABLED=true

# =============================================================================
# BACKUP & RECOVERY
# =============================================================================

# Database backup settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *
BACKUP_RETENTION_DAYS=30

# File backup settings
FILE_BACKUP_ENABLED=true
FILE_BACKUP_PATH=/backups/files

# Recovery settings
RECOVERY_POINT_OBJECTIVE=1h
RECOVERY_TIME_OBJECTIVE=4h

# =============================================================================
# DEVELOPMENT & DEBUGGING
# =============================================================================

# Debug mode (set to false in production)
DEBUG=false
DEVELOPMENT_MODE=false

# Feature flags
EXPERIMENTAL_FEATURES=false
BETA_ENDPOINTS=false

# Profiling (for performance debugging)
PROFILING_ENABLED=false
PROFILING_SAMPLE_RATE=0.01

# =============================================================================
# THIRD-PARTY INTEGRATIONS
# =============================================================================

# Slack notifications
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/SLACK/WEBHOOK

# Email notifications
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=your-email@gmail.com
SMTP_PASSWORD=your-app-password

# Error tracking
SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id

# Analytics
MIXPANEL_TOKEN=your-mixpanel-token
GOOGLE_ANALYTICS_ID=GA-XXXXXXXXX

# =============================================================================
# COMPLIANCE & AUDIT
# =============================================================================

# Audit logging
AUDIT_LOG_ENABLED=true
AUDIT_LOG_RETENTION_DAYS=365

# Data retention
USER_DATA_RETENTION_DAYS=2555  # 7 years for GDPR
TASK_DATA_RETENTION_DAYS=365
METRICS_RETENTION_DAYS=90

# Compliance settings
GDPR_COMPLIANT=true
SOC2_COMPLIANT=true
HIPAA_COMPLIANT=false

# =============================================================================
# SCALING & PERFORMANCE
# =============================================================================

# Horizontal scaling
MIN_REPLICAS=3
MAX_REPLICAS=20
CPU_UTILIZATION_THRESHOLD=70
MEMORY_UTILIZATION_THRESHOLD=80

# Resource limits
API_CPU_REQUEST=1000m
API_CPU_LIMIT=2000m
API_MEMORY_REQUEST=2Gi
API_MEMORY_LIMIT=4Gi

WORKER_CPU_REQUEST=2000m
WORKER_CPU_LIMIT=4000m
WORKER_MEMORY_REQUEST=4Gi
WORKER_MEMORY_LIMIT=8Gi

DASHBOARD_CPU_REQUEST=500m
DASHBOARD_CPU_LIMIT=1000m
DASHBOARD_MEMORY_REQUEST=1Gi
DASHBOARD_MEMORY_LIMIT=2Gi

# =============================================================================
# MAINTENANCE & OPERATIONS
# =============================================================================

# Maintenance windows
MAINTENANCE_WINDOW_START=02:00
MAINTENANCE_WINDOW_DURATION=2h
MAINTENANCE_TIMEZONE=UTC

# Automated updates
AUTO_UPDATE_ENABLED=false
AUTO_UPDATE_SCHEDULE=0 3 * * 1  # Mondays at 3 AM

# Emergency contacts
EMERGENCY_CONTACT_EMAIL=emergency@your-company.com
EMERGENCY_CONTACT_PHONE=+1-555-0123

# =============================================================================
# IMPORTANT SECURITY NOTES
# =============================================================================
#
# 1. NEVER commit this file with real secrets to version control
# 2. Use strong, unique passwords for all services
# 3. Rotate secrets regularly (at least quarterly)
# 4. Use a secret management system like Vault, AWS Secrets Manager, or Kubernetes secrets
# 5. Restrict network access to only necessary services
# 6. Enable audit logging for all security events
# 7. Regularly review and update access controls
#
# =============================================================================